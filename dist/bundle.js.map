{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://calculator/./src/script.ts"],"sourcesContent":["\nconst enum Operation {\n    None            = \"none\",\n    Ac              = \"AC\",\n    Sign            = \"+/-\",\n    Percent         = \"%\",\n    Divide          = \"÷\",\n    Multiplication  = \"x\",\n    Minus           = \"-\",\n    Plus            = \"+\",\n    Equal           = \"=\",\n}\n\nconst chain: {\n    acc: number,\n    opn: Operation,\n} = {\n    acc: 0,\n    opn: Operation.None\n};\n\nlet flgClearDisplay = false;\n\ndocument.addEventListener(\"click\", (event: Event) => {\n    if (event.target instanceof HTMLButtonElement) {\n        const display = (document.getElementById(\"display\") as HTMLDivElement);\n        const button = event.target;\n        // проверка \"клика\" по кнопке цифровой/кнопке с \",\"\n        if (button.dataset.digit != undefined) {\n            if (flgClearDisplay) {\n                display.innerHTML = \"\";\n                flgClearDisplay = false;\n            }\n            display.innerHTML = (display.innerHTML === \"0\" && button.value !== \",\") ? \"\" : display.innerHTML;\n\n            if (button.value === \",\") {\n                if (!/,/.test(display.innerHTML)) {\n                    display.innerHTML += button.value;\n                }\n            } else {\n                display.innerHTML += button.value;\n            }\n        }\n\n        // проверка \"клика\" по кнопке с действием/математической операцией\n        if (button.dataset.action != undefined) {\n            //alert(`flgClearDisplay = ${flgClearDisplay}\\n acc = ${chain.acc} opn = ${chain.opn}`);\n            // if (chain.opn === Operation.None) {\n            //     chain.acc = toCalc(display.innerHTML);\n            //     chain.opn = (button.value as Operation);\n            //     flgClearDisplay = true;\n            // } else {\n            //     chain.val = toCalc(display.innerHTML);\n            //     switch (chain.opn) {\n            //     case Operation.Divide:\n            //         chain.acc /= chain.val;\n            //         break;\n            //     case Operation.Multiplication:\n            //         chain.acc *= chain.val;\n            //         break;\n            //     case Operation.Minus:\n            //         chain.acc -= chain.val;\n            //         break;\n            //     case Operation.Plus:\n            //         chain.acc += chain.val;\n            //         break;\n            //     }\n            //     display.innerHTML = toDispay(chain.acc);\n            //     // chain.opn = Operation.None;\n            //     flgClearDisplay = true;\n            // }\n\n            if (chain.opn === Operation.None) {\n                chain.opn = (button.value as Operation);\n                chain.acc = toCalc(display.innerHTML);\n            } else {\n                const val = toCalc(display.innerHTML);\n                switch (chain.opn) {\n                case Operation.Divide:\n                    chain.acc /= val;\n                    break;\n                case Operation.Multiplication:\n                    chain.acc *= val;\n                    break;\n                case Operation.Minus:\n                    chain.acc -= val;\n                    break;\n                case Operation.Plus:\n                    chain.acc += val;\n                    break;\n                }\n                display.innerHTML = toDispay(chain.acc);\n                chain.opn = (button.value as Operation);\n            }\n            flgClearDisplay = true;\n        }\n    }\n});\n\nfunction toCalc(value: string): number { \n    return Number(value.replace(\",\", \".\"));\n}\n\nfunction toDispay(value: number): string {\n    return Number(value.toPrecision(15)).toString().replace(\".\", \",\");\n}"],"names":[],"sourceRoot":""}